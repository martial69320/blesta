!function(t){t.fn.extend({blestaScrollDom:function(e,n,i,r,a){a=a?a:3e3;var o=parseInt(t("#"+e).height()),s=parseInt(t("#"+n).height());o<=0&&(o=700);var l=parseInt(a*s/100);clearTimeout(this.timeout_id),this.timeout_id=null,t("#"+e).css({top:"0px"}),t("#"+e).delay(i),t("#"+e).animate({top:"-="+(o-s)},l,"linear",function(){clearTimeout(this.timeout_id),t(this).is(":visible")&&(this.timeout_id=setTimeout("$(document).blestaScrollDom('"+e+"','"+n+"',"+i+","+r+","+a+")",r))})},blestaRequest:function(e,n,i,r,a,o){i=i?i:null,r=r?r:null,a=a?a:null;var s={type:e,url:n,data:i,success:r,error:a};o=t.extend(s,o),t.ajax(o)},blestaUpdateRow:function(e,n){var i=t(this).next("tr");i.attr("id").split("_")[1];i.is(":visible")||t(this).blestaRequest("GET",e,null,function(e){n instanceof jQuery?n.html(e):t(n,i).html(e)})},blestaSubmitOnClick:function(e){var n={};return e=t.extend(n,e),this.each(function(){var n=!!e.form_id&&e.form_id;t(this).click(function(){return n?t("#"+n).submit():t(this).closest("form").submit(),!1})})},blestaContrastColor:function(t){return t=t.replace("#",""),3==t.strlen&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)>8388607.5?"000":"fff"},blestaColorPicker:function(e){var n=t(this),i={onBeforeShow:function(){t(this).ColorPickerSetColor(n.val())},onChange:function(t,e,i){n.val(e),n.css({backgroundColor:"#"+e,color:"#"+this.blestaContrastColor(n.val())})}};e=t.extend(i,e),n.css({backgroundColor:"#"+n.val(),color:"#"+this.blestaContrastColor(n.val())}),n.ColorPicker(i)},blestaVerticalAlign:function(e){var n={container:t(this).parent(),offset:2};return e=t.extend(n,e),this.each(function(){var n=t(e.container).height(),i=t(this).height();t(this).css("top",Math.max(0,n/e.offset-i/2))})},blestaSetInvTotals:function(e){t(this).blestaRequest("POST",e,t(this).closest("form").serialize(),function(e){e.subtotal&&e.subtotal.amount_formatted&&t(".totals_subtotal em").text(e.subtotal.amount_formatted);var n=0;t(".totals_tax").each(function(){if(e.tax[n]&&e.tax[n].amount_formatted){t(this).show();var i=e.tax[n],r="";i.description?r=i.description:i.name&&i.percentage&&(r=i.name+" ("+i.percentage+"%)"),t("span",this).text(r),t("em",this).text(i.amount_formatted)}else t(this).hide();n++}),e.total_w_tax&&e.total_w_tax.amount_formatted&&t(".totals_total em").text(e.total_w_tax.amount_formatted),e.total_due&&e.total_due.amount_formatted&&t(".totals_due em").text(e.total_due.amount_formatted),e.total_paid&&e.total_paid.amount_formatted&&t(".totals_paid em").text("-"+e.total_paid.amount_formatted)},null,{dataType:"json"})},blestaSortable:function(e,n,i){e=!!e&&e,i=!!i&&i;var r={tolerance:"pointer",containment:"parent",axis:"y",handle:e,helper:function(e,n){return n.children().each(function(){t(this).is("table,tr,td")&&t(this).width(t(this).width())}),n}};return n=t.extend(r,n),this.each(function(){i?t(this).sortable(n).disableSelection():t(this).sortable(n)})},blestaGetCaret:function(){return this.each(function(){if(el.selectionStart)return el.selectionStart;if(document.selection){el.focus();var t=document.selection.createRange();if(null==t)return 0;var e=el.createTextRange(),n=e.duplicate();return e.moveToBookmark(t.getBookmark()),n.setEndPoint("EndToStart",e),n.text.length}return 0})},blestaLoadWidgets:function(e){var n={container:null,fetch_uri:null,update_uri:null,toggle_uri:null};e=t.extend(n,e);e.fetch_uri&&t(this).each(function(){var n={section:null};t(this).hasClass("section1")&&(n.section="section1"),t(this).hasClass("section2")&&(n.section="section2"),t(this).hasClass("section3")&&(n.section="section3");var i=e.container;null==i&&(i=t(this)),t(this).blestaRequest("get",e.fetch_uri,n,function(r){for(var a in r)t("div.widget-container",i).remove(),t(i).append('<div id="widget_container_'+a+'"></div>'),t(this).blestaRequest("get",r[a].uri,null,function(e){if("function"==typeof innerShiv)var n=t(innerShiv(e.content,!1,!1));else var n=t(e.content);r[this.widget_id].open||(t("div.common_box_header",n).last().addClass("close"),t(n).blestaHideWidgets(),t(this).blestaToggleIcons(t("div.common_box_header a.arrow",n))),t("#widget_container_"+this.widget_id).replaceWith(n),t("#"+this.widget_id).blestaGetWidgetBadge()},null,{widget_id:a});t(i).parent().blestaBindGuiEvents({section:n.section,sort_uri:e.update_uri,toggle_uri:e.toggle_uri})},null,{dataType:"json"})})},blestaGetWidgetBadge:function(){var e=t(this);if(t(".label",e).remove(),t(".common_box_inner",this).is(":hidden")){var n=t('input[name="badge_uri"]',this).val();n&&t(e).blestaRequest("get",n,null,function(n){n&&t("h2",e).append('<strong class="label label-danger">'+n+"</strong>")})}},blestaHideWidgets:function(){t(".common_box_header.close+.common_box_inner",this).hide()},blestaModalConfirm:function(e){t(this).each(function(){var n=t(this);t(this).blestaModal({title:e.title?e.title:null,close:e.close?e.close:"Close",url:!1,onRender:function(i,r){t.ajax({url:e.base_url+"dialog/confirm/",data:{message:n.attr("rel")},success:function(i){r.set("content.text",i),t(".btn.yes",r.elements.content).click(function(){return e.submit?(r.hide(),e.form?e.form.submit():n.closest("form").submit(),!0):(window.location=n.attr("href"),!1)}),t(".btn.no",r.elements.content).click(function(){return r.hide(),!1})}})}})})},blestaModal:function(e){var n={title:null,close:"Close",onShow:function(t,e){},onHide:function(t,e){},onRender:function(t,e){},url:null,data:{},text:"",ajax:{},min_width:400,max_width:400,open:!1};e=t.extend(n,e),t(this).each(function(){t(this).click(function(){return!1}),null==e.url&&(e.url=e.url?e.url:t(this).attr("href")),0!=e.url&&t.isEmptyObject(e.ajax)&&(e.ajax={url:e.url,data:e.data}),t(this).qtip({content:{text:e.text?e.text:" ",title:{text:e.title?e.title:t(this).text(),button:e.close},ajax:e.ajax},events:{show:e.onShow,hide:e.onHide,render:function(n,i){t(i.elements.tooltip).css({"min-width":e.min_width,"max-width":e.max_width}),t(this).draggable({containment:"window",handle:i.elements.titlebar}),e.onRender(n,i)}},position:{my:"center",at:"center",target:t(window)},show:{event:"click",solo:!0,modal:!0,ready:e.open},hide:!1,style:"ui-tooltip-light ui-tooltip-rounded ui-tooltip-dialogue"})})},blestaBindGlobalGuiEvents:function(e){function n(){var e=!1;return t(".nav > li").each(function(){t(this).hasClass("open")&&(e=!0)}),e}function i(e){t(e).addClass("open"),o()}function r(){t(".nav > li").removeClass("open"),a()}function a(){t(".nav > li.current").addClass("active").removeClass("current")}function o(){t(".nav > li.active").addClass("current").removeClass("active")}var s={};e=t.extend(s,e),t(this).blestaHideWidgets(),this.blestaBindCloseMessage(),t(this).blestaBindPreventDoubleSubmission(),t(document).on("click","a.submit",function(){return t(this).closest("form").submit(),!1}),t(document,this).on("click","tr.expand",function(){t(this).next(".expand_details").toggle()}),t(document,this).on("click","tr.expand a,tr.expand input,tr.expand select",function(t){t.stopPropagation()}),t(this).blestaBindToolTips(),t(this).blestaBindPasswordGenerator(),t(this).blestaBindMarkdownEditor();try{t.dpText.TEXT_CHOOSE_DATE="",Date.format="yyyy-mm-dd",t("input.date").datePicker({startDate:"1996-01-01"})}catch(l){}try{t(".tab_slider",this).jCarouselLite({btnNext:".next",btnPrev:".prev",btnContainer:".tabs_nav",circular:!1,visible:10})}catch(l){}var c=window.History;c.enabled&&c.Adapter.bind(window,"statechange",function(){var e=c.getState();t(this).blestaRequest("GET",e.url,null,function(n){null==n.replacer?(t(e.data.box).html(n.content),t(e.data.box).blestaBindToolTips(),t(e.data.box).blestaBindPasswordGenerator(),t(e.data.box).blestaBindMarkdownEditor()):(t(n.replacer,e.data.box).html(n.content),t(n.replacer,e.data.box).blestaBindToolTips(),t(n.replacer,e.data.box).blestaBindPasswordGenerator(),t(n.replacer,e.data.box).blestaBindMarkdownEditor()),null!=n.message&&t("#right_container").prepend(n.message);try{t.dpText.TEXT_CHOOSE_DATE="",Date.format="yyyy-mm-dd",t("input.date").datePicker({startDate:"1996-01-01"})}catch(i){}try{t(".tab_slider",e.data.box).jCarouselLite({btnNext:".next",btnPrev:".prev",btnContainer:".tabs_nav",circular:!1,visible:10})}catch(i){}},null,{dataType:"json"})}),t(document).on("click","a.ajax",function(){var e=t(this).closest("section.common_box"),n=t(this).attr("href");return!e||t(this).blestaPushState("#"+e.attr("id"),n)}),t(document).keyup(function(e){27==e.keyCode&&(t("section").hasClass("full_screen")&&t(this).blestaToggleIcons(t("section a")),t("section").removeClass("full_screen"))}),t(document).on("mouseenter",".nav > li",function(){n()?(r(),i(t(this))):o()}),t(document).on("mouseleave",".nav > li",function(){n()||a()}),t(document).on("click tap","body:not(ul.nav)",function(){r()})},blestaPushState:function(e,n){if(History.enabled){try{History.pushState({box:e},t("title").text(),n)}catch(i){return!0}return!1}return!0},blestaBindGuiEvents:function(e){var n={};e=t.extend(n,e);try{t(".tab_slider",this).jCarouselLite({btnNext:".next",btnPrev:".prev",btnContainer:".tabs_nav",circular:!1,visible:10})}catch(i){}e.sort_uri&&t(".column",this).blestaSortable(".common_box_header",{connectWith:".column",axis:!1,containment:!1,cursor:"move",opacity:.8,start:function(e,n){t(".column .ui-sortable-placeholder").height(t(".common_box.ui-sortable-helper",this).height())},update:function(n,i){var r=null;t(this).hasClass("section1")&&(r="section1"),t(this).hasClass("section2")&&(r="section2"),t(this).hasClass("section3")&&(r="section3"),t(this).blestaRequest("post",e.sort_uri,t(this).sortable("serialize",{key:"widget["+r+"][]",expression:/(.*)/}))}}),t(this).on("hover",".column .common_box_header",function(){t(this).css("cursor","move")}),t(e.section?t("."+e.section,this):this).on("click","a.arrow",function(){var n=t(this),i=t(this).closest("div.common_box_header");return i.next(".common_box_inner").slideToggle("slow",function(){if(i.toggleClass("close"),t(this).blestaToggleIcons(n),e.toggle_uri){var r=!t(this).is(":hidden");i.blestaRequest("post",e.toggle_uri,i.parent().attr("id")+"="+r),i.parent().blestaGetWidgetBadge()}}),!1}),t(e.section?t("."+e.section,this):this).on("click","a.full_screen",function(){t(this).closest("section").toggleClass("full_screen"),t(this).blestaToggleIcons(t(this))})},blestaBindCloseMessage:function(){t(".error_section a.close",this).live("click",function(){return t(this).parent().animate({opacity:0,height:"hide"},400,function(){0==t(".error_section").has("article:visible").length&&t(".error_section").hide()}),!1})},blestaBindToolTips:function(){t("span.tooltip",this).each(function(){t(this).qtip({position:{adjust:{method:"flip flip"},my:"bottom left",at:"right top",viewport:t(window)},content:{text:t("div",this).html()},show:{event:"mouseover"},hide:{fixed:!0,delay:200},style:{classes:"ui-tooltip-cream"}})})},blestaBindPasswordGenerator:function(){return t(".generate-password",this).each(function(){var e=t(this),n=t(e).data("base-url");if(!n)return!1;var i=t(e).data("for-class"),r=t(e).data("modal-title"),a=t(e).data("modal-close"),o=t(e).data("length");o=parseInt(o),o=o?o:0;var s=t(e).data("options");s=s&&"object"==typeof s?s:{},t(e).blestaModal({title:r?r:"",close:a?a:"",url:!1,onRender:function(e,r){t.ajax({url:n+"dialog/password/",success:function(e){function n(){r.hide(),t(".modal-password",r.elements.content).val(""),t(".modal-password-copied",r.elements.content).prop("checked",!1),t(".modal-password-copied",r.elements.content).trigger("change")}r.set("content.text",e);var a=require("unicode-passgen");return t(".btn.generate",r.elements.content).on("click",function(){return t(".modal-password",r.elements.content).val(a.generate(o,s)),!1}),t(".btn.cancel",r.elements.content).on("click",function(){return n(),!1}),t(".modal-password-copied",r.elements.content).on("change",function(){t(".btn.save",r.elements.content).prop("disabled",!t(this).prop("checked"))}),t(".btn.save",r.elements.content).on("click",function(){var e=t(".modal-password",r.elements.content).val();return t.each(t(document).find("."+i),function(){t(this).is("input")?t(this).val(e):t(this).text(e)}),n(),!1}),!1}})}})}),!1},blestaBindMarkdownEditor:function(e){var n={autofocus:!1,savable:!1,hideable:!1,width:"inherit",height:"inherit",resize:"both",iconlibrary:"fa",language:"en",footer:"",fullscreen:{enable:!0},hiddenButtons:!1,disabledButtons:!1};e=t.extend(n,e);var i=t("html").attr("lang");return t("textarea[data-markdown-editor]").each(function(){var n=e,r=t(this).attr("lang");r&&r.length?n.language=r:i&&i.length&&(n.language=i),t(this).markdown(n)}),!1},blestaBindQuickLinks:function(){t("#quicklink").bind("click",function(){var e="remove";t(this).find("i").hasClass("fa-star-o")&&(e="add");var n={action:e,title:document.title.split("|")[0],uri:window.location.pathname+window.location.search};return t(this).blestaRequest("post",t(this).attr("href"),n,function(e){e.added?t("#quicklink i").removeClass("fa-star-o").addClass("fa-star"):t("#quicklink i").removeClass("fa-star").addClass("fa-star-o")},null,{dataType:"json"}),!1})},blestaRandomString:function(t,e){var n="";e=e||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},blestaSetHeadTag:function(e,n){n.id&&t(n.id).length?t(n.id,t("head")).attr(n):t("<"+e+" />",n).appendTo("head")},blestaTabbedContent:function(){this.each(function(){var e=t(this),n=t("li",e).index(t("ul li.current",e));t(e).children(".inner_content").children("div").hide(),t(e).children(".inner_content").children("div").eq(n).show(),t(e).children("ul").children("li").children("a").click(function(){var n=t("li",t(this).closest("ul")).index(t(this).closest("li"));return t(this).closest("ul").children("li").removeClass("current"),t(this).closest("ul").children("li").eq(n).addClass("current"),t(e).children(".inner_content").children("div").hide(),t(e).children(".inner_content").children("div").eq(n).show(),!1})})},blestaBindToggleEvent:function(e,n,i,r){t(e).live("click",function(){t(n).hasClass("show")?(t(n).addClass("hidden"),t(n).removeClass("show")):t(n).hasClass("hidden")?(t(n).addClass("show"),t(n).removeClass("hidden")):t(n).toggle();var e=t(this).find("i.fa");return t(this).hasClass("show_content")?(t(this).attr("class","hide_content"),t(e).removeClass("fa-caret-down").addClass("fa-caret-up"),void 0!=r&&(t(this).text(" "+r),e=t(e).clone(),t(this).prepend(e))):(t(this).attr("class","show_content"),t(e).removeClass("fa-caret-up").addClass("fa-caret-down"),void 0!=i&&(t(this).text(" "+i),e=t(e).clone(),t(this).prepend(e))),!1})},blestaSortObject:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push({key:n.toString(),value:t[n]});return e.sort(function(t,e){return t.value.toLowerCase().localeCompare(e.value.toLowerCase())})},blestaToggleIcons:function(e){t.each(t(e).find("i"),function(){t(this).hasClass("hidden")?t(this).removeClass("hidden"):t(this).addClass("hidden")})},blestaBindPreventDoubleSubmission:function(){t(document).on("submit","form.disable-on-submit",function(){return t(this).blestaDisableFormSubmission(t(this))})},blestaDisableFormSubmission:function(t){return t.data("submitted")!==!0&&(t.data("submitted",!0),t.find('input[type="submit"],button[type="submit"]').addClass("disabled"),!0)},blestaEnableFormSubmission:function(t){t.data("submitted",!1),t.find('input[type="submit"],button[type="submit"]').removeClass("disabled")}}),t(document).ready(function(){t(this).ajaxError(function(t,e,n){401==e.status&&(window.location=window.location.href),406==e.status&&(window.location=window.location.href)}),t(this).blestaBindGlobalGuiEvents(),t(this).blestaBindQuickLinks(),t("a.show_all").click(function(){return t("ul.other_actions").slideDown("fast",function(){t("a.show_common").toggle(),t("a.show_all").toggle()}),!1}),t("a.show_common").click(function(){return t("ul.other_actions").slideUp("fast",function(){t("a.show_common").toggle(),t("a.show_all").toggle()}),!1})})}(jQuery),+function(t){"use strict";function e(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i="#"!==n?t(document).find(n):null;return i&&i.length?i:e.parent()}function n(n){n&&3===n.which||(t(r).remove(),t(a).each(function(){var i=t(this),r=e(i),a={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(r[0],n.target)||(r.trigger(n=t.Event("hide.bs.dropdown",a)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger(t.Event("hidden.bs.dropdown",a)))))}))}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof e&&i[e].call(n)})}var r=".dropdown-backdrop",a='[data-toggle="dropdown"]',o=function(e){t(e).on("click.bs.dropdown",this.toggle)};o.VERSION="3.4.1",o.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var a=e(r),o=a.hasClass("open");if(n(),!o){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",n);var s={relatedTarget:this};if(a.trigger(i=t.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger(t.Event("shown.bs.dropdown",s))}return!1}},o.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var r=e(i),o=r.hasClass("open");if(!o&&27!=n.which||o&&27==n.which)return 27==n.which&&r.find(a).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=r.find(".dropdown-menu"+s);if(l.length){var c=l.index(n.target);38==n.which&&c>0&&c--,40==n.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,o.prototype.toggle).on("keydown.bs.dropdown.data-api",a,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),require=function(){function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}return t}()({1:[function(t,e,n){(function(t){!function(i){var r="object"==typeof n&&n,a="object"==typeof e&&e&&e.exports==r&&e,o="object"==typeof t&&t;o.global!==o&&o.window!==o||(i=o);var s={rangeOrder:"A rangeâ€™s `stop` value must be greater than or equal to the `start` value.",codePointRange:"Invalid code point value. Code points range from U+000000 to U+10FFFF."},l=55296,c=56319,u=56320,h=57343,d=/\\x00([^0123456789]|$)/g,f={},p=f.hasOwnProperty,g=function(t,e){var n;for(n in e)p.call(e,n)&&(t[n]=e[n]);return t},v=function(t,e){for(var n=-1,i=t.length;++n<i;)e(t[n],n)},m=f.toString,b=function(t){return"[object Array]"==m.call(t)},_=function(t){return"number"==typeof t||"[object Number]"==m.call(t)},w="0000",y=function(t,e){var n=String(t);return n.length<e?(w+n).slice(-e):n},k=function(t){return Number(t).toString(16).toUpperCase()},x=[].slice,C=function(t){for(var e,n=-1,i=t.length,r=i-1,a=[],o=!0,s=0;++n<i;)if(e=t[n],o)a.push(e),s=e,o=!1;else if(e==s+1){if(n!=r){s=e;continue}o=!0,a.push(e+1)}else a.push(s+1,e),s=e;return o||a.push(e+1),a},S=function(t,e){for(var n,i,r=0,a=t.length;r<a;){if(n=t[r],i=t[r+1],e>=n&&e<i)return e==n?i==n+1?(t.splice(r,2),t):(t[r]=e+1,t):e==i-1?(t[r+1]=e,t):(t.splice(r,2,n,e,e+1,i),t);r+=2}return t},$=function(t,e,n){if(n<e)throw Error(s.rangeOrder);for(var i,r,a=0;a<t.length;){if(i=t[a],r=t[a+1]-1,i>n)return t;if(e<=i&&n>=r)t.splice(a,2);else{if(e>=i&&n<r)return e==i?(t[a]=n+1,t[a+1]=r+1,t):(t.splice(a,2,i,e,n+1,r+1),t);if(e>=i&&e<=r)t[a+1]=e;else if(n>=i&&n<=r)return t[a]=n+1,t;a+=2}}return t},B=function(t,e){var n,i,r=0,a=null,o=t.length;if(e<0||e>1114111)throw RangeError(s.codePointRange);for(;r<o;){if(n=t[r],i=t[r+1],e>=n&&e<i)return t;if(e==n-1)return t[r]=e,t;if(n>e)return t.splice(null!=a?a+2:0,0,e,e+1),t;if(e==i)return e+1==t[r+2]?(t.splice(r,4,n,t[r+3]),t):(t[r+1]=e+1,t);a=r,r+=2}return t.push(e,e+1),t},T=function(t,e){for(var n,i,r=0,a=t.slice(),o=e.length;r<o;)n=e[r],i=e[r+1]-1,a=n==i?B(a,n):P(a,n,i),r+=2;return a},j=function(t,e){for(var n,i,r=0,a=t.slice(),o=e.length;r<o;)n=e[r],i=e[r+1]-1,a=n==i?S(a,n):$(a,n,i),r+=2;return a},P=function(t,e,n){if(n<e)throw Error(s.rangeOrder);if(e<0||e>1114111||n<0||n>1114111)throw RangeError(s.codePointRange);for(var i,r,a=0,o=!1,l=t.length;a<l;){if(i=t[a],r=t[a+1],o){if(i==n+1)return t.splice(a-1,2),t;if(i>n)return t;i>=e&&i<=n&&(r>e&&r-1<=n?(t.splice(a,2),a-=2):(t.splice(a-1,2),a-=2))}else{if(i==n+1)return t[a]=e,t;if(i>n)return t.splice(a,0,e,n+1),t;if(e>=i&&e<r&&n+1<=r)return t;e>=i&&e<r||r==e?(t[a+1]=n+1,o=!0):e<=i&&n+1>=r&&(t[a]=e,t[a+1]=n+1,o=!0)}a+=2}return o||t.push(e,n+1),t},E=function(t,e){var n=0,i=t.length,r=t[n],a=t[i-1];if(i>=2&&(e<r||e>a))return!1;for(;n<i;){if(r=t[n],a=t[n+1],e>=r&&e<a)return!0;n+=2}return!1},O=function(t,e){for(var n,i=0,r=e.length,a=[];i<r;)n=e[i],E(t,n)&&a.push(n),++i;return C(a)},M=function(t){return!t.length},I=function(t){return 2==t.length&&t[0]+1==t[1]},R=function(t){for(var e,n,i=0,r=[],a=t.length;i<a;){for(e=t[i],n=t[i+1];e<n;)r.push(e),++e;i+=2}return r},A=Math.floor,N=function(t){return parseInt(A((t-65536)/1024)+l,10)},q=function(t){return parseInt((t-65536)%1024+u,10)},z=String.fromCharCode,L=function(t){var e;return e=9==t?"\\t":10==t?"\\n":12==t?"\\f":13==t?"\\r":92==t?"\\\\":36==t||t>=40&&t<=43||t>=45&&t<=47||63==t||t>=91&&t<=94||t>=123&&t<=125?"\\"+z(t):t>=32&&t<=126?z(t):t<=255?"\\x"+y(k(t),2):"\\u"+y(k(t),4)},D=function(t){return t<=65535?L(t):"\\u{"+t.toString(16).toUpperCase()+"}"},G=function(t){var e,n=t.length,i=t.charCodeAt(0);return i>=l&&i<=c&&n>1?(e=t.charCodeAt(1),1024*(i-l)+e-u+65536):i},H=function(t){var e,n,i="",r=0,a=t.length;if(I(t))return L(t[0]);for(;r<a;)e=t[r],n=t[r+1]-1,i+=e==n?L(e):e+1==n?L(e)+L(n):L(e)+"-"+L(n),r+=2;return"["+i+"]"},F=function(t){var e,n,i="",r=0,a=t.length;if(I(t))return D(t[0]);for(;r<a;)e=t[r],n=t[r+1]-1,i+=e==n?D(e):e+1==n?D(e)+D(n):D(e)+"-"+D(n),r+=2;return"["+i+"]"},U=function(t){for(var e,n,i=[],r=[],a=[],o=[],s=0,d=t.length;s<d;)e=t[s],n=t[s+1]-1,e<l?(n<l&&a.push(e,n+1),n>=l&&n<=c&&(a.push(e,l),i.push(l,n+1)),n>=u&&n<=h&&(a.push(e,l),i.push(l,c+1),r.push(u,n+1)),n>h&&(a.push(e,l),i.push(l,c+1),r.push(u,h+1),n<=65535?a.push(h+1,n+1):(a.push(h+1,65536),o.push(65536,n+1)))):e>=l&&e<=c?(n>=l&&n<=c&&i.push(e,n+1),n>=u&&n<=h&&(i.push(e,c+1),r.push(u,n+1)),n>h&&(i.push(e,c+1),r.push(u,h+1),n<=65535?a.push(h+1,n+1):(a.push(h+1,65536),o.push(65536,n+1)))):e>=u&&e<=h?(n>=u&&n<=h&&r.push(e,n+1),n>h&&(r.push(e,h+1),n<=65535?a.push(h+1,n+1):(a.push(h+1,65536),o.push(65536,n+1)))):e>h&&e<=65535?n<=65535?a.push(e,n+1):(a.push(e,65536),o.push(65536,n+1)):o.push(e,n+1),s+=2;return{loneHighSurrogates:i,loneLowSurrogates:r,bmp:a,astral:o}},Q=function(t){for(var e,n,i,r,a,o,s=[],l=[],c=!1,u=-1,h=t.length;++u<h;)if(e=t[u],n=t[u+1]){for(i=e[0],r=e[1],a=n[0],o=n[1],l=r;a&&i[0]==a[0]&&i[1]==a[1];)l=I(o)?B(l,o[0]):P(l,o[0],o[1]-1),++u,e=t[u],i=e[0],r=e[1],n=t[u+1],a=n&&n[0],o=n&&n[1],c=!0;s.push([i,c?l:r]),c=!1}else s.push(e);return W(s)},W=function(t){if(1==t.length)return t;for(var e=-1,n=-1;++e<t.length;){var i=t[e],r=i[1],a=r[0],o=r[1];for(n=e;++n<t.length;){var s=t[n],l=s[1],c=l[0],u=l[1];a==c&&o==u&&(I(s[0])?i[0]=B(i[0],s[0][0]):i[0]=P(i[0],s[0][0],s[0][1]-1),t.splice(n,1),--n)}}return t},V=function(t){if(!t.length)return[];for(var e,n,i,r,a,o,s=0,l=[],c=t.length;s<c;){e=t[s],n=t[s+1]-1,i=N(e),r=q(e),a=N(n),o=q(n);var d=r==u,f=o==h,p=!1;i==a||d&&f?(l.push([[i,a+1],[r,o+1]]),p=!0):l.push([[i,i+1],[r,h+1]]),!p&&i+1<a&&(f?(l.push([[i+1,a+1],[u,o+1]]),p=!0):l.push([[i+1,a],[u,h+1]])),p||l.push([[a,a+1],[u,o+1]]),s+=2}return Q(l)},K=function(t){var e=[];return v(t,function(t){var n=t[0],i=t[1];e.push(H(n)+H(i))}),e.join("|")},J=function(t,e,n){if(n)return F(t);var i=[],r=U(t),a=r.loneHighSurrogates,o=r.loneLowSurrogates,s=r.bmp,l=r.astral,c=!M(a),u=!M(o),h=V(l);return e&&(s=T(s,a),c=!1,s=T(s,o),u=!1),M(s)||i.push(H(s)),h.length&&i.push(K(h)),c&&i.push(H(a)+"(?![\\uDC00-\\uDFFF])"),u&&i.push("(?:[^\\uD800-\\uDBFF]|^)"+H(o)),i.join("|")},X=function(t){return arguments.length>1&&(t=x.call(arguments)),this instanceof X?(this.data=[],t?this.add(t):this):(new X).add(t)};X.version="1.3.3";var Z=X.prototype;g(Z,{add:function(t){var e=this;return null==t?e:t instanceof X?(e.data=T(e.data,t.data),e):(arguments.length>1&&(t=x.call(arguments)),b(t)?(v(t,function(t){e.add(t)}),e):(e.data=B(e.data,_(t)?t:G(t)),e))},remove:function(t){var e=this;return null==t?e:t instanceof X?(e.data=j(e.data,t.data),e):(arguments.length>1&&(t=x.call(arguments)),b(t)?(v(t,function(t){e.remove(t)}),e):(e.data=S(e.data,_(t)?t:G(t)),e))},addRange:function(t,e){var n=this;return n.data=P(n.data,_(t)?t:G(t),_(e)?e:G(e)),n},removeRange:function(t,e){var n=this,i=_(t)?t:G(t),r=_(e)?e:G(e);return n.data=$(n.data,i,r),n},intersection:function(t){var e=this,n=t instanceof X?R(t.data):t;return e.data=O(e.data,n),e},contains:function(t){return E(this.data,_(t)?t:G(t))},clone:function(){var t=new X;return t.data=this.data.slice(0),t},toString:function(t){var e=J(this.data,!!t&&t.bmpOnly,!!t&&t.hasUnicodeFlag);return e?e.replace(d,"\\0$1"):"[]"},toRegExp:function(t){var e=this.toString(t&&t.indexOf("u")!=-1?{hasUnicodeFlag:!0}:null);return RegExp(e,t||"")},valueOf:function(){return R(this.data)}}),Z.toArray=Z.valueOf,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return X}):r&&!r.nodeType?a?a.exports=X:r.regenerate=X:i.regenerate=X}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],"unicode-passgen":[function(t,e,n){(function(i){(function(){"use strict";function r(t){var e={include:[{chars:[[0,65535]],min:0}],exclude:[]};for(var n in t)if(e.hasOwnProperty(n)&&Array.isArray(t[n])){"include"===n&&(e.include=[]);for(var i in t[n])if("object"==typeof t[n][i]&&t[n][i].hasOwnProperty("chars")&&Array.isArray(t[n][i].chars)){var r={chars:t[n][i].chars,min:0};t[n][i].hasOwnProperty("min")&&h(t[n][i].min)&&t[n][i].min>0&&(r.min=t[n][i].min),e[n].push(r)}}return e}function a(t,e){var n="";if(t.length<=0)return n;for(var i=0;i<e;i++)n+=String.fromCharCode(t[Math.floor(Math.random()*t.length)]);return n}function o(t){var e=p(),n=t.include;for(var i in n)for(var r in n[i].chars)void 0!==n[i].chars[r][0]&&(e=l(e,n[i].chars[r]));return c(e,t.exclude),e.valueOf()}function s(t){var e,n=t.include,i=[];for(var r in n){e=p();for(var a in n[r].chars)void 0!==n[r].chars[a][0]&&(e=l(e,n[r].chars[a]));e=c(e,t.exclude),i.push({set:e.valueOf(),min:n[r].min})}return i}function l(t,e){return void 0!==e[1]?t.addRange(e[0],e[1]):t.add(e[0]),t}function c(t,e){for(var n in e)for(var i in e[n].chars)void 0!==e[n].chars[i][0]&&(void 0!==e[n].chars[i][1]?t.removeRange(e[n].chars[i][0],e[n].chars[i][1]):t.remove(e[n].chars[i][0]));return t}function u(t){for(var e="string"==typeof t?t.split(""):t,n=e.length-1;n>0;n--){var i=Math.floor(Math.random()*(n+1)),r=e[n];e[n]=e[i],e[i]=r}return e.join("")}function h(t){return!isNaN(t)&&(0|parseFloat(t))===t}var d="object"==typeof self&&self.self===self&&self||"object"==typeof i&&i.global===i&&i||this||{},f=(d.unicodePassgen,{}),p=d.regenerate||void 0!==typeof t&&t("regenerate");if(!p)throw new Error("unicodePassgen requires regenerate, see https://github.com/mathiasbynens/regenerate");f.generate=function(t,e){if(!h(t))throw new TypeError("Non-integer length type");if(t<0)throw new RangeError("Length must be a positive integer");var n=r(e),i=o(n),l="";if(i.length<=0)return l;var c=s(n);for(var d in c)l+=a(c[d].set,c[d].min);return l+=a(i,t-l.length),u(l)},void 0!==typeof n?(void 0!==typeof e&&e.exports&&(e.exports=f),n.unicodePassgen=f):d.unicodePassgen=f}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{regenerate:1}]},{},["unicode-passgen"]),function(t){function e(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function n(){var t=require("util");return"Markdown.mk_block( "+t.inspect(this.toString())+", "+t.inspect(this.trailing)+", "+t.inspect(this.lineNumber)+" )"}function i(t){for(var e=0,n=-1;(n=t.indexOf("\n",n+1))!==-1;)e++;return e}function r(t,e){function n(t){this.len_after=t,this.name="close_"+e}var i=t+"_state",r="strong"==t?"em_state":"strong_state";return function(a,o){if(this[i][0]==e)return this[i].shift(),[a.length,new n(a.length-e.length)];var s=this[r].slice(),l=this[i].slice();this[i].unshift(e);var c=this.processInline(a.substr(e.length)),u=c[c.length-1];this[i].shift();if(u instanceof n){c.pop();var h=a.length-u.len_after;return[h,[t].concat(c)]}return this[r]=s,this[i]=l,[e.length,e]}}function o(t){for(var e=t.split(""),n=[""],i=!1;e.length;){var r=e.shift();switch(r){case" ":i?n[n.length-1]+=r:n.push("");break;case"'":case'"':i=!i;break;case"\\":r=e.shift();default:n[n.length-1]+=r}}return n}function s(t){return v(t)&&t.length>1&&"object"==typeof t[1]&&!v(t[1])?t[1]:void 0}function l(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(t){if("string"==typeof t)return l(t);var e=t.shift(),n={},i=[];for(!t.length||"object"!=typeof t[0]||t[0]instanceof Array||(n=t.shift());t.length;)i.push(c(t.shift()));var r="";for(var a in n)r+=" "+a+'="'+l(n[a])+'"';return"img"==e||"br"==e||"hr"==e?"<"+e+r+"/>":"<"+e+r+">"+i.join("")+"</"+e+">"}function u(t,e,n){var i;n=n||{};var r=t.slice(0);"function"==typeof n.preprocessTreeNode&&(r=n.preprocessTreeNode(r,e));var a=s(r);if(a){r[1]={};for(i in a)r[1][i]=a[i];a=r[1]}if("string"==typeof r)return r;switch(r[0]){case"header":r[0]="h"+r[1].level,delete r[1].level;break;case"bulletlist":r[0]="ul";break;case"numberlist":r[0]="ol";break;case"listitem":r[0]="li";break;case"para":r[0]="p";break;case"markdown":r[0]="html",a&&delete a.references;break;case"code_block":r[0]="pre",i=a?2:1;var o=["code"];o.push.apply(o,r.splice(i,r.length-i)),r[i]=o;break;case"inlinecode":r[0]="code";break;case"img":r[1].src=r[1].href,delete r[1].href;break;case"linebreak":r[0]="br";break;case"link":r[0]="a";break;case"link_ref":r[0]="a";var l=e[a.ref];if(!l)return a.original;delete a.ref,a.href=l.href,l.title&&(a.title=l.title),delete a.original;break;case"img_ref":r[0]="img";var l=e[a.ref];if(!l)return a.original;delete a.ref,a.src=l.href,l.title&&(a.title=l.title),delete a.original}if(i=1,a){for(var c in r[1]){i=2;break}1===i&&r.splice(i,1)}for(;i<r.length;++i)r[i]=u(r[i],e,n);return r}function h(t){for(var e=s(t)?2:1;e<t.length;)"string"==typeof t[e]?e+1<t.length&&"string"==typeof t[e+1]?t[e]+=t.splice(e+1,1)[0]:++e:(h(t[e]),++e)}var d=t.Markdown=function(t){switch(typeof t){case"undefined":this.dialect=d.dialects.Gruber;break;case"object":this.dialect=t;break;default:if(!(t in d.dialects))throw new Error("Unknown Markdown dialect '"+String(t)+"'");this.dialect=d.dialects[t]}this.em_state=[],this.strong_state=[],this.debug_indent=""};t.parse=function(t,e){var n=new d(e);return n.toTree(t)},t.toHTML=function(e,n,i){var r=t.toHTMLTree(e,n,i);return t.renderJsonML(r)},t.toHTMLTree=function(t,e,n){"string"==typeof t&&(t=this.parse(t,e));var i=s(t),r={};
i&&i.references&&(r=i.references);var a=u(t,r,n);return h(a),a};var f=d.mk_block=function(t,i,r){1==arguments.length&&(i="\n\n");var a=new String(t);return a.trailing=i,a.inspect=n,a.toSource=e,void 0!=r&&(a.lineNumber=r),a};d.prototype.split_blocks=function(t,e){t=t.replace(/(\r\n|\n|\r)/g,"\n");var n,r=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,a=[],o=1;for(null!=(n=/^(\s*\n)/.exec(t))&&(o+=i(n[0]),r.lastIndex=n[0].length);null!==(n=r.exec(t));)"\n#"==n[2]&&(n[2]="\n",r.lastIndex--),a.push(f(n[1],n[2],o)),o+=i(n[0]);return a},d.prototype.processBlock=function(t,e){var n=this.dialect.block,i=n.__order__;if("__call__"in n)return n.__call__.call(this,t,e);for(var r=0;r<i.length;r++){var a=n[i[r]].call(this,t,e);if(a)return(!v(a)||a.length>0&&!v(a[0]))&&this.debug(i[r],"didn't return a proper array"),a}return[]},d.prototype.processInline=function(t){return this.dialect.inline.__call__.call(this,String(t))},d.prototype.toTree=function(t,e){var n=t instanceof Array?t:this.split_blocks(t),i=this.tree;try{for(this.tree=e||this.tree||["markdown"];n.length;){var r=this.processBlock(n.shift(),n);r.length&&this.tree.push.apply(this.tree,r)}return this.tree}finally{e&&(this.tree=i)}},d.prototype.debug=function(){var t=Array.prototype.slice.call(arguments);t.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,t),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,t)},d.prototype.loop_re_over_block=function(t,e,n){for(var i,r=e.valueOf();r.length&&null!=(i=t.exec(r));)r=r.substr(i[0].length),n.call(this,i);return r},d.dialects={},d.dialects.Gruber={block:{atxHeader:function(t,e){var n=t.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(n){var i=["header",{level:n[1].length}];return Array.prototype.push.apply(i,this.processInline(n[2])),n[0].length<t.length&&e.unshift(f(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[i]}},setextHeader:function(t,e){var n=t.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(n){var i="="===n[2]?1:2,r=["header",{level:i},n[1]];return n[0].length<t.length&&e.unshift(f(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[r]}},code:function(t,e){var n=[],i=/^(?: {0,3}\t| {4})(.*)\n?/;if(t.match(i)){t:for(;;){var r=this.loop_re_over_block(i,t.valueOf(),function(t){n.push(t[1])});if(r.length){e.unshift(f(r,t.trailing));break t}if(!e.length)break t;if(!e[0].match(i))break t;n.push(t.trailing.replace(/[^\n]/g,"").substring(2)),t=e.shift()}return[["code_block",n.join("\n")]]}},horizRule:function(t,e){var n=t.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(n){var i=[["hr"]];return n[1]&&i.unshift.apply(i,this.processBlock(n[1],[])),n[3]&&e.unshift(f(n[3])),i}},lists:function(){function t(t){return new RegExp("(?:^("+l+"{0,"+t+"} {0,3})("+a+")\\s+)|(^"+l+"{0,"+(t-1)+"}[ ]{0,4})")}function e(t){return t.replace(/ {0,3}\t/g,"    ")}function n(t,e,n,i){if(e)return void t.push(["para"].concat(n));var r=t[t.length-1]instanceof Array&&"para"==t[t.length-1][0]?t[t.length-1]:t;i&&t.length>1&&n.unshift(i);for(var a=0;a<n.length;a++){var o=n[a],s="string"==typeof o;s&&r.length>1&&"string"==typeof r[r.length-1]?r[r.length-1]+=o:r.push(o)}}function i(t,e){for(var n=new RegExp("^("+l+"{"+t+"}.*?\\n?)*$"),i=new RegExp("^"+l+"{"+t+"}","gm"),r=[];e.length>0&&n.exec(e[0]);){var a=e.shift(),o=a.replace(i,"");r.push(f(o,a.trailing,a.lineNumber))}return r}function r(t,e,n){var i=t.list,r=i[i.length-1];if(!(r[1]instanceof Array&&"para"==r[1][0]))if(e+1==n.length)r.push(["para"].concat(r.splice(1,r.length-1)));else{var a=r.pop();r.push(["para"].concat(r.splice(1,r.length-1)),a)}}var a="[*+-]|\\d+\\.",o=/[*+-]/,s=new RegExp("^( {0,3})("+a+")[ \t]+"),l="(?: {0,3}\\t| {4})";return function(a,l){function c(t){var e=o.exec(t[2])?["bulletlist"]:["numberlist"];return f.push({list:e,indent:t[1]}),e}var u=a.match(s);if(u){for(var h,d,f=[],p=c(u),v=!1,m=[f[0].list];;){for(var b=a.split(/(?=\n)/),_="",w=0;w<b.length;w++){var y="",k=b[w].replace(/^\n/,function(t){return y=t,""}),x=t(f.length);if(u=k.match(x),void 0!==u[1]){_.length&&(n(h,v,this.processInline(_),y),v=!1,_=""),u[1]=e(u[1]);var C=Math.floor(u[1].length/4)+1;if(C>f.length)p=c(u),h.push(p),h=p[1]=["listitem"];else{var S=!1;for(d=0;d<f.length;d++)if(f[d].indent==u[1]){p=f[d].list,f.splice(d+1,f.length-(d+1)),S=!0;break}S||(C++,C<=f.length?(f.splice(C,f.length-C),p=f[C-1].list):(p=c(u),h.push(p))),h=["listitem"],p.push(h)}y=""}k.length>u[0].length&&(_+=y+k.substr(u[0].length))}_.length&&(n(h,v,this.processInline(_),y),v=!1,_="");var $=i(f.length,l);$.length>0&&(g(f,r,this),h.push.apply(h,this.toTree($,[])));var B=l[0]&&l[0].valueOf()||"";if(!B.match(s)&&!B.match(/^ /))break;a=l.shift();var T=this.dialect.block.horizRule(a,l);if(T){m.push.apply(m,T);break}g(f,r,this),v=!0}return m}}}(),blockquote:function(t,e){if(t.match(/^>/m)){var n=[];if(">"!=t[0]){for(var i=t.split(/\n/),r=[],a=t.lineNumber;i.length&&">"!=i[0][0];)r.push(i.shift()),a++;var o=f(r.join("\n"),"\n",t.lineNumber);n.push.apply(n,this.processBlock(o,[])),t=f(i.join("\n"),t.trailing,a)}for(;e.length&&">"==e[0][0];){var l=e.shift();t=f(t+t.trailing+l,l.trailing,t.lineNumber)}var c=t.replace(/^> ?/gm,""),u=(this.tree,this.toTree(c,["blockquote"])),h=s(u);return h&&h.references&&(delete h.references,m(h)&&u.splice(1,1)),n.push(u),n}},referenceDefn:function(t,e){var n=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(t.match(n)){s(this.tree)||this.tree.splice(1,0,{});var i=s(this.tree);void 0===i.references&&(i.references={});var r=this.loop_re_over_block(n,t,function(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1));var e=i.references[t[1].toLowerCase()]={href:t[2]};void 0!==t[4]?e.title=t[4]:void 0!==t[5]&&(e.title=t[5])});return r.length&&e.unshift(f(r,t.trailing)),[]}},para:function(t,e){return[["para"].concat(this.processInline(t))]}}},d.dialects.Gruber.inline={__oneElement__:function(t,e,n){var i,r;e=e||this.dialect.inline.__patterns__;var a=new RegExp("([\\s\\S]*?)("+(e.source||e)+")");if(i=a.exec(t),!i)return[t.length,t];if(i[1])return[i[1].length,i[1]];var r;return i[2]in this.dialect.inline&&(r=this.dialect.inline[i[2]].call(this,t.substr(i.index),i,n||[])),r=r||[i[2].length,i[2]]},__call__:function(t,e){function n(t){"string"==typeof t&&"string"==typeof r[r.length-1]?r[r.length-1]+=t:r.push(t)}for(var i,r=[];t.length>0;)i=this.dialect.inline.__oneElement__.call(this,t,e,r),t=t.substr(i.shift()),g(i,n);return r},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(t){return this.dialect.inline.__escape__.exec(t)?[2,t.charAt(1)]:[1,"\\"]},"![":function(t){var e=t.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1)),e[2]=this.dialect.inline.__call__.call(this,e[2],/\\/)[0];var n={alt:e[1],href:e[2]||""};return void 0!==e[4]&&(n.title=e[4]),[e[0].length,["img",n]]}return e=t.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),e?[e[0].length,["img_ref",{alt:e[1],ref:e[2].toLowerCase(),original:e[0]}]]:[2,"!["]},"[":function b(t){var e=String(t),n=d.DialectHelpers.inline_until_char.call(this,t.substr(1),"]");if(!n)return[1,"["];var b,i,r=1+n[0],a=n[1];t=t.substr(r);var o=t.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(o){var s=o[1];if(r+=o[0].length,s&&"<"==s[0]&&">"==s[s.length-1]&&(s=s.substring(1,s.length-1)),!o[3])for(var l=1,c=0;c<s.length;c++)switch(s[c]){case"(":l++;break;case")":0==--l&&(r-=s.length-c,s=s.substring(0,c))}return s=this.dialect.inline.__call__.call(this,s,/\\/)[0],i={href:s||""},void 0!==o[3]&&(i.title=o[3]),b=["link",i].concat(a),[r,b]}return o=t.match(/^\s*\[(.*?)\]/),o?(r+=o[0].length,i={ref:(o[1]||String(a)).toLowerCase(),original:e.substr(0,r)},b=["link_ref",i].concat(a),[r,b]):1==a.length&&"string"==typeof a[0]?(i={ref:a[0].toLowerCase(),original:e.substr(0,r)},b=["link_ref",i,a[0]],[r,b]):[1,"["]},"<":function(t){var e;return null!=(e=t.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?e[3]?[e[0].length,["link",{href:"mailto:"+e[3]},e[3]]]:"mailto"==e[2]?[e[0].length,["link",{href:e[1]},e[1].substr("mailto:".length)]]:[e[0].length,["link",{href:e[1]},e[1]]]:[1,"<"]},"`":function(t){var e=t.match(/(`+)(([\s\S]*?)\1)/);return e&&e[2]?[e[1].length+e[2].length,["inlinecode",e[3]]]:[1,"`"]},"  \n":function(t){return[3,["linebreak"]]}},d.dialects.Gruber.inline["**"]=r("strong","**"),d.dialects.Gruber.inline.__=r("strong","__"),d.dialects.Gruber.inline["*"]=r("em","*"),d.dialects.Gruber.inline._=r("em","_"),d.buildBlockOrder=function(t){var e=[];for(var n in t)"__order__"!=n&&"__call__"!=n&&e.push(n);t.__order__=e},d.buildInlinePatterns=function(t){var e=[];for(var n in t)if(!n.match(/^__.*__$/)){var i=n.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");e.push(1==n.length?i:"(?:"+i+")")}e=e.join("|"),t.__patterns__=e;var r=t.__call__;t.__call__=function(t,n){return void 0!=n?r.call(this,t,n):r.call(this,t,e)}},d.DialectHelpers={},d.DialectHelpers.inline_until_char=function(t,e){for(var n=0,i=[];;){if(t.charAt(n)==e)return n++,[n,i];if(n>=t.length)return null;var r=this.dialect.inline.__oneElement__.call(this,t.substr(n));n+=r[0],i.push.apply(i,r.slice(1))}},d.subclassDialect=function(t){function e(){}function n(){}return e.prototype=t.block,n.prototype=t.inline,{block:new e,inline:new n}},d.buildBlockOrder(d.dialects.Gruber.block),d.buildInlinePatterns(d.dialects.Gruber.inline),d.dialects.Maruku=d.subclassDialect(d.dialects.Gruber),d.dialects.Maruku.processMetaHash=function(t){for(var e=o(t),n={},i=0;i<e.length;++i)if(/^#/.test(e[i]))n.id=e[i].substring(1);else if(/^\./.test(e[i]))n["class"]?n["class"]=n["class"]+e[i].replace(/./," "):n["class"]=e[i].substring(1);else if(/\=/.test(e[i])){var r=e[i].split(/\=/);n[r[0]]=r[1]}return n},d.dialects.Maruku.block.document_meta=function(t,e){if(!(t.lineNumber>1)&&t.match(/^(?:\w+:.*\n)*\w+:.*$/)){s(this.tree)||this.tree.splice(1,0,{});var n=t.split(/\n/);for(p in n){var i=n[p].match(/(\w+):\s*(.*)$/),r=i[1].toLowerCase(),a=i[2];this.tree[1][r]=a}return[]}},d.dialects.Maruku.block.block_meta=function(t,e){var n=t.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(n){var i,r=this.dialect.processMetaHash(n[2]);if(""===n[1]){var o=this.tree[this.tree.length-1];if(i=s(o),"string"==typeof o)return;i||(i={},o.splice(1,0,i));for(a in r)i[a]=r[a];return[]}var l=t.replace(/\n.*$/,""),c=this.processBlock(l,[]);i=s(c[0]),i||(i={},c[0].splice(1,0,i));for(a in r)i[a]=r[a];return c}},d.dialects.Maruku.block.definition_list=function(t,e){var n,i,r=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,a=["dl"];if(i=t.match(r)){for(var o=[t];e.length&&r.exec(e[0]);)o.push(e.shift());for(var s=0;s<o.length;++s){var i=o[s].match(r),l=i[1].replace(/\n$/,"").split(/\n/),c=i[2].split(/\n:\s+/);for(n=0;n<l.length;++n)a.push(["dt",l[n]]);for(n=0;n<c.length;++n)a.push(["dd"].concat(this.processInline(c[n].replace(/(\n)\s+/,"$1"))))}return[a]}},d.dialects.Maruku.block.table=function _(t,e){var n,i,r=function(t,e){e=e||"\\s",e.match(/^[\\|\[\]{}?*.+^$]$/)&&(e="\\"+e);for(var n,i=[],r=new RegExp("^((?:\\\\.|[^\\\\"+e+"])*)"+e+"(.*)");n=t.match(r);)i.push(n[1]),t=n[2];return i.push(t),i},a=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,o=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(i=t.match(a))i[3]=i[3].replace(/^\s*\|/gm,"");else if(!(i=t.match(o)))return;var _=["table",["thead",["tr"]],["tbody"]];i[2]=i[2].replace(/\|\s*$/,"").split("|");var s=[];for(g(i[2],function(t){t.match(/^\s*-+:\s*$/)?s.push({align:"right"}):t.match(/^\s*:-+\s*$/)?s.push({align:"left"}):t.match(/^\s*:-+:\s*$/)?s.push({align:"center"}):s.push({})}),i[1]=r(i[1].replace(/\|\s*$/,""),"|"),n=0;n<i[1].length;n++)_[1][1].push(["th",s[n]||{}].concat(this.processInline(i[1][n].trim())));return g(i[3].replace(/\|\s*$/gm,"").split("\n"),function(t){var e=["tr"];for(t=r(t,"|"),n=0;n<t.length;n++)e.push(["td",s[n]||{}].concat(this.processInline(t[n].trim())));_[2].push(e)},this),[_]},d.dialects.Maruku.inline["{:"]=function(t,e,n){if(!n.length)return[2,"{:"];var i=n[n.length-1];if("string"==typeof i)return[2,"{:"];var r=t.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!r)return[2,"{:"];var a=this.dialect.processMetaHash(r[1]),o=s(i);o||(o={},i.splice(1,0,o));for(var l in a)o[l]=a[l];return[r[0].length,""]},d.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,d.buildBlockOrder(d.dialects.Maruku.block),d.buildInlinePatterns(d.dialects.Maruku.inline);var g,v=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)};g=Array.prototype.forEach?function(t,e,n){return t.forEach(e,n)}:function(t,e,n){for(var i=0;i<t.length;i++)e.call(n||t,t[i],i,t)};var m=function(t){for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0};t.renderJsonML=function(t,e){e=e||{},e.root=e.root||!1;var n=[];if(e.root)n.push(c(t));else for(t.shift(),!t.length||"object"!=typeof t[0]||t[0]instanceof Array||t.shift();t.length;)n.push(c(t.shift()));return n.join("\n\n")}}(function(){return"undefined"==typeof exports?(window.markdown={},window.markdown):exports}()),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){"use strict";var e=function(e,n){var i=["autofocus","savable","hideable","width","height","resize","iconlibrary","language","footer","fullscreen","hiddenButtons","disabledButtons"];t.each(i,function(i,r){"undefined"!=typeof t(e).data(r)&&(n="object"==typeof n?n:{},n[r]=t(e).data(r))}),this.$ns="bootstrap-markdown",this.$element=t(e),this.$editable={el:null,type:null,attrKeys:[],attrValues:[],content:null},this.$options=t.extend(!0,{},t.fn.markdown.defaults,n,this.$element.data("options")),this.$oldContent=null,this.$isPreview=!1,this.$isFullscreen=!1,this.$editor=null,this.$textarea=null,this.$handler=[],this.$callback=[],this.$nextTab=[],this.showEditor()};e.prototype={constructor:e,__alterButtons:function(e,n){var i=this.$handler,r="all"==e,a=this;t.each(i,function(t,i){var o=!0;o=!r&&i.indexOf(e)<0,o===!1&&n(a.$editor.find('button[data-handler="'+i+'"]'))})},__buildButtons:function(e,n){var i,r=this.$ns,a=this.$handler,o=this.$callback;for(i=0;i<e.length;i++){var s,l=e[i];for(s=0;s<l.length;s++){var c,u=l[s].data,h=t("<div/>",{"class":"btn-group"});for(c=0;c<u.length;c++){var d,f,p=u[c],g=r+"-"+p.name,v=this.__getIcon(p.icon),m=p.btnText?p.btnText:"",b=p.btnClass?p.btnClass:"btn",_=p.tabIndex?p.tabIndex:"-1",w="undefined"!=typeof p.hotkey?p.hotkey:"",y="undefined"!=typeof jQuery.hotkeys&&""!==w?" ("+w+")":"";d=t("<button></button>"),d.text(" "+this.__localize(m)).addClass("btn-default btn-sm").addClass(b),b.match(/btn\-(primary|success|info|warning|danger|link)/)&&d.removeClass("btn-default"),d.attr({type:"button",title:this.__localize(p.title)+y,tabindex:_,"data-provider":r,"data-handler":g,"data-hotkey":w}),p.toggle===!0&&d.attr("data-toggle","button"),f=t("<span/>"),f.addClass(v),f.prependTo(d),h.append(d),a.push(g),o.push(p.callback)}n.append(h)}}return n},__setListener:function(){var e="undefined"!=typeof this.$textarea.attr("rows"),n=this.$textarea.val().split("\n").length>5?this.$textarea.val().split("\n").length:"5",i=e?this.$textarea.attr("rows"):n;this.$textarea.attr("rows",i),this.$options.resize&&this.$textarea.css("resize",this.$options.resize),this.$textarea.on({focus:t.proxy(this.focus,this),keyup:t.proxy(this.keyup,this),change:t.proxy(this.change,this),select:t.proxy(this.select,this)}),this.eventSupported("keydown")&&this.$textarea.on("keydown",t.proxy(this.keydown,this)),this.eventSupported("keypress")&&this.$textarea.on("keypress",t.proxy(this.keypress,this)),this.$textarea.data("markdown",this)},__handle:function(e){var n=t(e.currentTarget),i=this.$handler,r=this.$callback,a=n.attr("data-handler"),o=i.indexOf(a),s=r[o];t(e.currentTarget).focus(),s(this),this.change(this),a.indexOf("cmdSave")<0&&this.$textarea.focus(),e.preventDefault()},__localize:function(e){var n=t.fn.markdown.messages,i=this.$options.language;return"undefined"!=typeof n&&"undefined"!=typeof n[i]&&"undefined"!=typeof n[i][e]?n[i][e]:e},__getIcon:function(t){return"object"==typeof t?t[this.$options.iconlibrary]:t},setFullscreen:function(e){var n=this.$editor,i=this.$textarea;e===!0?(n.addClass("md-fullscreen-mode"),t("body").addClass("md-nooverflow"),this.$options.onFullscreen(this)):(n.removeClass("md-fullscreen-mode"),t("body").removeClass("md-nooverflow"),1==this.$isPreview&&this.hidePreview().showPreview()),this.$isFullscreen=e,i.focus()},showEditor:function(){var e,n=this,i=this.$ns,r=this.$element,a=(r.css("height"),r.css("width"),this.$editable),o=this.$handler,s=this.$callback,l=this.$options,c=t("<div/>",{"class":"md-editor",click:function(){n.focus()}});if(null===this.$editor){var u=t("<div/>",{"class":"md-header btn-toolbar"}),h=[];if(l.buttons.length>0&&(h=h.concat(l.buttons[0])),l.additionalButtons.length>0&&t.each(l.additionalButtons[0],function(e,n){var i=t.grep(h,function(t,e){return t.name===n.name});i.length>0?i[0].data=i[0].data.concat(n.data):h.push(l.additionalButtons[0][e])}),l.reorderButtonGroups.length>0&&(h=h.filter(function(t){return l.reorderButtonGroups.indexOf(t.name)>-1}).sort(function(t,e){return l.reorderButtonGroups.indexOf(t.name)<l.reorderButtonGroups.indexOf(e.name)?-1:l.reorderButtonGroups.indexOf(t.name)>l.reorderButtonGroups.indexOf(e.name)?1:0})),h.length>0&&(u=this.__buildButtons([h],u)),l.fullscreen.enable&&u.append('<div class="md-controls"><a class="md-control md-control-fullscreen" href="#"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOn)+'"></span></a></div>').on("click",".md-control-fullscreen",function(t){t.preventDefault(),n.setFullscreen(!0)}),c.append(u),r.is("textarea"))r.before(c),e=r,e.addClass("md-input"),c.append(e);else{var d="function"==typeof toMarkdown?toMarkdown(r.html()):r.html(),f=t.trim(d);e=t("<textarea/>",{"class":"md-input",val:f}),c.append(e),a.el=r,a.type=r.prop("tagName").toLowerCase(),a.content=r.html(),t(r[0].attributes).each(function(){a.attrKeys.push(this.nodeName),a.attrValues.push(this.nodeValue)}),r.replaceWith(c)}var p=t("<div/>",{"class":"md-footer"}),g=!1,v="";if(l.savable){g=!0;var m="cmdSave";o.push(m),s.push(l.onSave),p.append('<button class="btn btn-success" data-provider="'+i+'" data-handler="'+m+'"><i class="icon icon-white icon-ok"></i> '+this.__localize("Save")+"</button>")}if(v="function"==typeof l.footer?l.footer(this):l.footer,""!==t.trim(v)&&(g=!0,p.append(v)),g&&c.append(p),l.width&&"inherit"!==l.width&&(jQuery.isNumeric(l.width)?(c.css("display","table"),e.css("width",l.width+"px")):c.addClass(l.width)),l.height&&"inherit"!==l.height)if(jQuery.isNumeric(l.height)){var b=l.height;u&&(b=Math.max(0,b-u.outerHeight())),p&&(b=Math.max(0,b-p.outerHeight())),e.css("height",b+"px")}else c.addClass(l.height);this.$editor=c,this.$textarea=e,this.$editable=a,this.$oldContent=this.getContent(),this.__setListener(),this.$editor.attr("id",(new Date).getTime()),this.$editor.on("click",'[data-provider="bootstrap-markdown"]',t.proxy(this.__handle,this)),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this.eventSupported("keydown")&&"object"==typeof jQuery.hotkeys&&u.find('[data-provider="bootstrap-markdown"]').each(function(){var n=t(this),i=n.attr("data-hotkey");""!==i.toLowerCase()&&e.bind("keydown",i,function(){return n.trigger("click"),!1})}),"preview"===l.initialstate?this.showPreview():"fullscreen"===l.initialstate&&l.fullscreen.enable&&this.setFullscreen(!0)}else this.$editor.show();return l.autofocus&&(this.$textarea.focus(),this.$editor.addClass("active")),l.fullscreen.enable&&l.fullscreen!==!1&&(this.$editor.append('<div class="md-fullscreen-controls"><a href="#" class="exit-fullscreen" title="Exit fullscreen"><span class="'+this.__getIcon(l.fullscreen.icons.fullscreenOff)+'"></span></a></div>'),this.$editor.on("click",".exit-fullscreen",function(t){t.preventDefault(),n.setFullscreen(!1)})),this.hideButtons(l.hiddenButtons),this.disableButtons(l.disabledButtons),l.onShow(this),this},parseContent:function(t){var e,t=t||this.$textarea.val();return e=this.$options.parser?this.$options.parser(t):"object"==typeof markdown?markdown.toHTML(t):"function"==typeof marked?marked(t):t},showPreview:function(){var e,n,i=this.$options,r=this.$textarea,a=r.next(),o=t("<div/>",{"class":"md-preview","data-provider":"markdown-preview"});return 1==this.$isPreview?this:(this.$isPreview=!0,this.disableButtons("all").enableButtons("cmdPreview"),n=i.onPreview(this),e="string"==typeof n?n:this.parseContent(),o.html(e),a&&"md-footer"==a.attr("class")?o.insertBefore(a):r.parent().append(o),o.css({width:r.outerWidth()+"px",height:r.outerHeight()+"px"}),this.$options.resize&&o.css("resize",this.$options.resize),r.hide(),o.data("markdown",this),(this.$element.is(":disabled")||this.$element.is("[readonly]"))&&(this.$editor.addClass("md-editor-disabled"),this.disableButtons("all")),this)},hidePreview:function(){this.$isPreview=!1;var t=this.$editor.find('div[data-provider="markdown-preview"]');return t.remove(),this.enableButtons("all"),this.disableButtons(this.$options.disabledButtons),this.$textarea.show(),this.__setListener(),this},isDirty:function(){return this.$oldContent!=this.getContent()},getContent:function(){return this.$textarea.val()},setContent:function(t){return this.$textarea.val(t),this},findSelection:function(t){var e,n=this.getContent();if(e=n.indexOf(t),e>=0&&t.length>0){var i,r=this.getSelection();return this.setSelection(e,e+t.length),i=this.getSelection(),this.setSelection(r.start,r.end),i}return null},getSelection:function(){var t=this.$textarea[0];return("selectionStart"in t&&function(){var e=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:e,text:t.value.substr(t.selectionStart,e)}}||function(){return null})()},setSelection:function(t,e){var n=this.$textarea[0];return("selectionStart"in n&&function(){n.selectionStart=t,n.selectionEnd=e}||function(){return null})()},replaceSelection:function(t){var e=this.$textarea[0];return("selectionStart"in e&&function(){return e.value=e.value.substr(0,e.selectionStart)+t+e.value.substr(e.selectionEnd,e.value.length),e.selectionStart=e.value.length,this}||function(){return e.value+=t,jQuery(e)})()},getNextTab:function(){if(0===this.$nextTab.length)return null;var t,e=this.$nextTab.shift();return"function"==typeof e?t=e():"object"==typeof e&&e.length>0&&(t=e),t},setNextTab:function(t,e){if("string"==typeof t){var n=this;this.$nextTab.push(function(){return n.findSelection(t)})}else if("number"==typeof t&&"number"==typeof e){var i=this.getSelection();this.setSelection(t,e),this.$nextTab.push(this.getSelection()),this.setSelection(i.start,i.end)}},__parseButtonNameParam:function(t){return"string"==typeof t?t.split(" "):t},enableButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t,e){i.__alterButtons(n[t],function(t){t.removeAttr("disabled")})}),this},disableButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t,e){i.__alterButtons(n[t],function(t){t.attr("disabled","disabled")})}),this},hideButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t,e){i.__alterButtons(n[t],function(t){t.addClass("hidden")})}),this},showButtons:function(e){var n=this.__parseButtonNameParam(e),i=this;return t.each(n,function(t,e){i.__alterButtons(n[t],function(t){t.removeClass("hidden")})}),this},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},keyup:function(t){var e=!1;switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:var n;if(n=this.getNextTab(),null!==n){var i=this;setTimeout(function(){i.setSelection(n.start,n.end)},500),e=!0}else{var r=this.getSelection();r.start==r.end&&r.end==this.getContent().length?e=!1:(this.setSelection(this.getContent().length,this.getContent().length),e=!0)}break;case 13:e=!1;break;case 27:this.$isFullscreen&&this.setFullscreen(!1),e=!1;break;default:e=!1}e&&(t.stopPropagation(),t.preventDefault()),this.$options.onChange(this)},change:function(t){return this.$options.onChange(this),this},select:function(t){return this.$options.onSelect(this),this},focus:function(e){var n=this.$options,i=(n.hideable,this.$editor);return i.addClass("active"),t(document).find(".md-editor").each(function(){if(t(this).attr("id")!==i.attr("id")){var e;e=t(this).find("textarea").data("markdown"),null===e&&(e=t(this).find('div[data-provider="markdown-preview"]').data("markdown")),e&&e.blur()}}),n.onFocus(this),this},blur:function(e){var n=this.$options,i=n.hideable,r=this.$editor,a=this.$editable;if(r.hasClass("active")||0===this.$element.parent().length){if(r.removeClass("active"),i)if(null!==a.el){var o=t("<"+a.type+"/>"),s=this.getContent(),l=this.parseContent(s);t(a.attrKeys).each(function(t,e){o.attr(a.attrKeys[t],a.attrValues[t])}),o.html(l),r.replaceWith(o)}else r.hide();n.onBlur(this)}return this}};var n=t.fn.markdown;t.fn.markdown=function(n){return this.each(function(){var i=t(this),r=i.data("markdown"),a="object"==typeof n&&n;r||i.data("markdown",r=new e(this,a))})},t.fn.markdown.messages={},t.fn.markdown.defaults={autofocus:!1,hideable:!1,savable:!1,width:"inherit",height:"inherit",resize:"none",iconlibrary:"glyph",language:"en",initialstate:"editor",parser:null,buttons:[[{name:"groupFont",data:[{name:"cmdBold",hotkey:"Ctrl+B",title:"Bold",icon:{glyph:"glyphicon glyphicon-bold",fa:"fa fa-bold","fa-3":"icon-bold"},callback:function(t){var e,n,i=t.getSelection(),r=t.getContent();e=0===i.length?t.__localize("strong text"):i.text,"**"===r.substr(i.start-2,2)&&"**"===r.substr(i.end,2)?(t.setSelection(i.start-2,i.end+2),t.replaceSelection(e),n=i.start-2):(t.replaceSelection("**"+e+"**"),n=i.start+2),t.setSelection(n,n+e.length)}},{name:"cmdItalic",title:"Italic",hotkey:"Ctrl+I",icon:{glyph:"glyphicon glyphicon-italic",fa:"fa fa-italic","fa-3":"icon-italic"},callback:function(t){var e,n,i=t.getSelection(),r=t.getContent();e=0===i.length?t.__localize("emphasized text"):i.text,"_"===r.substr(i.start-1,1)&&"_"===r.substr(i.end,1)?(t.setSelection(i.start-1,i.end+1),t.replaceSelection(e),n=i.start-1):(t.replaceSelection("_"+e+"_"),n=i.start+1),t.setSelection(n,n+e.length)}},{name:"cmdHeading",title:"Heading",hotkey:"Ctrl+H",icon:{glyph:"glyphicon glyphicon-header",fa:"fa fa-header","fa-3":"icon-font"},callback:function(t){var e,n,i,r,a=t.getSelection(),o=t.getContent();e=0===a.length?t.__localize("heading text"):a.text+"\n",i=4,"### "===o.substr(a.start-i,i)||(i=3,"###"===o.substr(a.start-i,i))?(t.setSelection(a.start-i,a.end),t.replaceSelection(e),n=a.start-i):a.start>0&&(r=o.substr(a.start-1,1),!!r&&"\n"!=r)?(t.replaceSelection("\n\n### "+e),n=a.start+6):(t.replaceSelection("### "+e),n=a.start+4),t.setSelection(n,n+e.length)}}]},{name:"groupLink",data:[{name:"cmdUrl",title:"URL/Link",hotkey:"Ctrl+L",icon:{glyph:"glyphicon glyphicon-link",fa:"fa fa-link","fa-3":"icon-link"},callback:function(e){var n,i,r,a=e.getSelection();e.getContent();n=0===a.length?e.__localize("enter link description here"):a.text,r=prompt(e.__localize("Insert Hyperlink"),"http://");var o=new RegExp("^((http|https)://|(mailto:)|(//))[a-z0-9]","i");if(null!==r&&""!==r&&"http://"!==r&&o.test(r)){var s=t("<div>"+r+"</div>").text();e.replaceSelection("["+n+"]("+s+")"),i=a.start+1,e.setSelection(i,i+n.length)}}},{name:"cmdImage",title:"Image",hotkey:"Ctrl+G",icon:{glyph:"glyphicon glyphicon-picture",fa:"fa fa-picture-o","fa-3":"icon-picture"},callback:function(e){var n,i,r,a=e.getSelection();e.getContent();n=0===a.length?e.__localize("enter image description here"):a.text,r=prompt(e.__localize("Insert Image Hyperlink"),"http://");var o=new RegExp("^((http|https)://|(//))[a-z0-9]","i");if(null!==r&&""!==r&&"http://"!==r&&o.test(r)){var s=t("<div>"+r+"</div>").text();e.replaceSelection("!["+n+"]("+s+' "'+e.__localize("enter image title here")+'")'),i=a.start+2,e.setNextTab(e.__localize("enter image title here")),e.setSelection(i,i+n.length)}}}]},{name:"groupMisc",data:[{name:"cmdList",hotkey:"Ctrl+U",title:"Unordered List",icon:{glyph:"glyphicon glyphicon-list",fa:"fa fa-list","fa-3":"icon-list-ul"},callback:function(e){var n,i,r=e.getSelection();e.getContent();if(0===r.length)n=e.__localize("list text here"),e.replaceSelection("- "+n),i=r.start+2;else if(r.text.indexOf("\n")<0)n=r.text,e.replaceSelection("- "+n),i=r.start+2;else{var a=[];a=r.text.split("\n"),n=a[0],t.each(a,function(t,e){a[t]="- "+e}),e.replaceSelection("\n\n"+a.join("\n")),i=r.start+4}e.setSelection(i,i+n.length)}},{name:"cmdListO",hotkey:"Ctrl+O",title:"Ordered List",icon:{glyph:"glyphicon glyphicon-th-list",fa:"fa fa-list-ol","fa-3":"icon-list-ol"},callback:function(e){var n,i,r=e.getSelection();e.getContent();if(0===r.length)n=e.__localize("list text here"),e.replaceSelection("1. "+n),i=r.start+3;else if(r.text.indexOf("\n")<0)n=r.text,e.replaceSelection("1. "+n),i=r.start+3;else{var a=[];a=r.text.split("\n"),n=a[0],t.each(a,function(t,e){a[t]="1. "+e}),e.replaceSelection("\n\n"+a.join("\n")),i=r.start+5}e.setSelection(i,i+n.length)}},{name:"cmdCode",hotkey:"Ctrl+K",title:"Code",icon:{glyph:"glyphicon glyphicon-asterisk",fa:"fa fa-code","fa-3":"icon-code"},callback:function(t){var e,n,i=t.getSelection(),r=t.getContent();e=0===i.length?t.__localize("code text here"):i.text,"```\n"===r.substr(i.start-4,4)&&"\n```"===r.substr(i.end,4)?(t.setSelection(i.start-4,i.end+4),t.replaceSelection(e),n=i.start-4):"`"===r.substr(i.start-1,1)&&"`"===r.substr(i.end,1)?(t.setSelection(i.start-1,i.end+1),t.replaceSelection(e),n=i.start-1):r.indexOf("\n")>-1?(t.replaceSelection("```\n"+e+"\n```"),n=i.start+4):(t.replaceSelection("`"+e+"`"),n=i.start+1),t.setSelection(n,n+e.length)}},{name:"cmdQuote",hotkey:"Ctrl+Q",title:"Quote",icon:{glyph:"glyphicon glyphicon-comment",fa:"fa fa-quote-left","fa-3":"icon-quote-left"},callback:function(e){var n,i,r=e.getSelection();e.getContent();if(0===r.length)n=e.__localize("quote here"),e.replaceSelection("> "+n),i=r.start+2;else if(r.text.indexOf("\n")<0)n=r.text,e.replaceSelection("> "+n),i=r.start+2;else{var a=[];a=r.text.split("\n"),n=a[0],t.each(a,function(t,e){a[t]="> "+e}),e.replaceSelection("\n\n"+a.join("\n")),i=r.start+4}e.setSelection(i,i+n.length)}}]},{name:"groupUtil",data:[{name:"cmdPreview",toggle:!0,hotkey:"Ctrl+P",title:"Preview",btnText:"Preview",btnClass:"btn btn-primary btn-sm",icon:{glyph:"glyphicon glyphicon-search",fa:"fa fa-search","fa-3":"icon-search"},callback:function(t){var e=t.$isPreview;e===!1?t.showPreview():t.hidePreview()}}]}]],additionalButtons:[],reorderButtonGroups:[],hiddenButtons:[],disabledButtons:[],footer:"",fullscreen:{enable:!0,icons:{fullscreenOn:{fa:"fa fa-expand",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-full"},fullscreenOff:{fa:"fa fa-compress",glyph:"glyphicon glyphicon-fullscreen","fa-3":"icon-resize-small"}}},onShow:function(t){},onPreview:function(t){},onSave:function(t){},onBlur:function(t){},onFocus:function(t){},onChange:function(t){},onFullscreen:function(t){},onSelect:function(t){}},t.fn.markdown.Constructor=e,t.fn.markdown.noConflict=function(){return t.fn.markdown=n,this};var i=function(t){var e=t;return e.data("markdown")?void e.data("markdown").showEditor():void e.markdown()},r=function(e){var n=t(document.activeElement);t(document).find(".md-editor").each(function(){var e=t(this),i=n.closest(".md-editor")[0]===this,r=e.find("textarea").data("markdown")||e.find('div[data-provider="markdown-preview"]').data("markdown");r&&!i&&r.blur()})};t(document).on("click.markdown.data-api",'[data-provide="markdown-editable"]',function(e){i(t(this)),e.preventDefault()}).on("click focusin",function(t){r(t)}).ready(function(){t('textarea[data-provide="markdown"]').each(function(){
i(t(this))})})});